<!-- Демо: три варианта прелоадера Slide to Unlock — градиент, видео, картинка -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Примеры: Slide to Unlock (градиент / видео / картинка)</title>
  <style>
  body { margin: 0; font-family: 'Montserrat', Arial, sans-serif; }
  .demo-nav { position: fixed; top: 16px; left: 16px; z-index: 1000000000; display: flex; gap: 8px; }
  .demo-nav button { padding: 10px 14px; border: 0; border-radius: 10px; background: #111827; color: #fff; cursor: pointer; opacity: .9; }
  .demo-nav button:hover { opacity: 1; }

  .preloader-slide {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 999999999;
    display: none; /* в демо скрыты, показываем кнопкой */
    justify-content: center;
    align-items: flex-end;
    width: 100vw;
    height: 100vh;
    height: 100dvh;
    opacity: 1;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    overflow: hidden;
    cursor: default;
    padding-bottom: calc(48px + env(safe-area-inset-bottom, 0px));
  }

  .bg-holder {
    position: absolute; inset: 0; z-index: 0; pointer-events: none; background: transparent;
  }
  .bg-video { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; display: none; }

  .slide-container {
    position: relative;
    margin: 40px 0;
    width: 320px;
    height: 60px;
    background: rgba(255,255,255,0.2);
    border-radius: 30px;
    border: 2px solid rgba(255,255,255,0.3);
    backdrop-filter: blur(10px);
    overflow: hidden;
    z-index: 2;
  }
  .slide-track { position: relative; width: 100%; height: 100%; border-radius: 28px; }
  .slide-text { position: absolute; top:50%; left:50%; transform: translate(-50%,-50%); color:#fff; font-weight:500; letter-spacing:.5px; user-select:none; pointer-events:none; }
  .slide-button { position:absolute; left:4px; top:4px; width:52px; height:52px; background:#fff; border-radius:50%; cursor:grab; transition:background .3s ease; display:flex; align-items:center; justify-content:center; box-shadow:0 2px 10px rgba(0,0,0,.2); }
  .slide-button:active { cursor:grabbing; }
  .slide-icon { color:#667eea; transition:color .3s ease; }
  .slide-button.success .slide-icon { color:#fff; }

  @media (max-width:480px) {
    .slide-container{ width:280px; height:50px; }
  }
  </style>
</head>
<body>
  <div class="demo-nav">
    <button data-target="#preloader-gradient">Градиент</button>
    <button data-target="#preloader-video">Видео</button>
    <button data-target="#preloader-image">Картинка</button>
  </div>

  <!-- ВАРИАНТ 1: ГРАДИЕНТ -->
  <div class="preloader-slide" id="preloader-gradient" data-bg-type="gradient" data-bg-value="linear-gradient(135deg, #667eea 0%, #764ba2 100%)">
    <div class="bg-holder"><video class="bg-video" playsinline muted loop preload="auto"></video></div>
    <div class="slide-container">
      <div class="slide-track">
        <div class="slide-text">Разблокируйте</div>
        <div class="slide-button">
          <div class="slide-icon">
            <svg class="arrow-icon" viewBox="0 0 24 24" width="20" height="20"><path d="M8.59 16.59L13.17 12L8.59 7.41L10 6L16 12L10 18L8.59 16.59Z" fill="currentColor"/></svg>
            <svg class="check-icon" viewBox="0 0 24 24" width="20" height="20" style="display:none;"><path d="M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z" fill="currentColor"/></svg>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ВАРИАНТ 2: ВИДЕО -->
  <div class="preloader-slide" id="preloader-video" data-bg-type="video" data-bg-value="https://b4701886-2e3c-4a60-9e9f-056bd416f1cc.selstorage.ru/IMG_5120.MP4">
    <div class="bg-holder"><video class="bg-video" playsinline muted loop preload="auto"></video></div>
    <div class="slide-container">
      <div class="slide-track">
        <div class="slide-text">Разблокируйте</div>
        <div class="slide-button">
          <div class="slide-icon">
            <svg class="arrow-icon" viewBox="0 0 24 24" width="20" height="20"><path d="M8.59 16.59L13.17 12L8.59 7.41L10 6L16 12L10 18L8.59 16.59Z" fill="currentColor"/></svg>
            <svg class="check-icon" viewBox="0 0 24 24" width="20" height="20" style="display:none;"><path d="M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z" fill="currentColor"/></svg>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ВАРИАНТ 3: КАРТИНКА -->
  <div class="preloader-slide" id="preloader-image" data-bg-type="image" data-bg-value="https://images.unsplash.com/photo-1516259762381-22954d7d3ad2?q=80&w=1600&auto=format&fit=crop">
    <div class="bg-holder"><video class="bg-video" playsinline muted loop preload="auto"></video></div>
    <div class="slide-container">
      <div class="slide-track">
        <div class="slide-text">Разблокируйте</div>
        <div class="slide-button">
          <div class="slide-icon">
            <svg class="arrow-icon" viewBox="0 0 24 24" width="20" height="20"><path d="M8.59 16.59L13.17 12L8.59 7.41L10 6L16 12L10 18L8.59 16.59Z" fill="currentColor"/></svg>
            <svg class="check-icon" viewBox="0 0 24 24" width="20" height="20" style="display:none;"><path d="M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z" fill="currentColor"/></svg>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
  // Показ нужного примера
  const nav = document.querySelector('.demo-nav');
  nav.addEventListener('click', function(e){
    if (e.target.tagName !== 'BUTTON') return;
    const targetSel = e.target.getAttribute('data-target');
    document.querySelectorAll('.preloader-slide').forEach(function(p){ p.style.display = 'none'; });
    const root = document.querySelector(targetSel);
    if (!root.dataset.inited) initPreloader(root);
    root.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  });

  function setupBackground(root) {
    const holder = root.querySelector('.bg-holder');
    const video = root.querySelector('.bg-video');
    const type = (root.getAttribute('data-bg-type')||'gradient').toLowerCase();
    const value = root.getAttribute('data-bg-value')||'';
    if (type === 'video') {
      holder.style.background = 'none';
      video.style.display = 'block';
      video.src = value;
      const tryPlay = function(){ video.play().catch(function(){}); };
      video.addEventListener('canplay', tryPlay, { once: true });
      tryPlay();
    } else if (type === 'image') {
      video.removeAttribute('src');
      video.style.display = 'none';
      holder.style.background = 'center/cover no-repeat url("'+value+'")';
    } else {
      video.removeAttribute('src');
      video.style.display = 'none';
      holder.style.background = value || 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
    }
  }

  function initPreloader(root) {
    if (!root || root.dataset.inited) return;
    root.dataset.inited = '1';
    setupBackground(root);

    const slideButton = root.querySelector('.slide-button');
    const slideContainer = root.querySelector('.slide-container');
    const arrowIcon = slideButton.querySelector('.arrow-icon');
    const checkIcon = slideButton.querySelector('.check-icon');

    let isDragging = false; let startX = 0; let currentX = 0; let maxX = 0;

    function initSlider(){
      const containerRect = slideContainer.getBoundingClientRect();
      const buttonRect = slideButton.getBoundingClientRect();
      maxX = containerRect.width - buttonRect.width - 8;
    }

    function handleStart(e){
      isDragging = true; startX = e.type === 'mousedown' ? e.clientX : e.touches[0].clientX;
      currentX = parseInt(slideButton.style.left || '0');
      slideButton.style.transition = 'none'; initSlider();
    }
    function handleMove(e){
      if (!isDragging) return; e.preventDefault();
      const clientX = e.type === 'mousemove' ? e.clientX : e.touches[0].clientX;
      const deltaX = clientX - startX; const newX = Math.max(0, Math.min(maxX, currentX + deltaX));
      slideButton.style.left = newX + 'px';
      if (newX >= maxX * 0.9) completeUnlock();
    }
    function handleEnd(){
      if (!isDragging) return; isDragging = false; const currentLeft = parseInt(slideButton.style.left || '0');
      if (currentLeft < maxX * 0.9) { slideButton.style.transition = 'left 0.3s ease'; slideButton.style.left = '0px'; }
    }
    function completeUnlock(){
      isDragging = false; slideButton.style.transition = 'left 0.3s ease'; slideButton.style.left = maxX + 'px';
      setTimeout(function(){ arrowIcon.style.display = 'none'; checkIcon.style.display = 'block'; slideButton.classList.add('success'); slideButton.style.background = '#4CAF50'; }, 300);
      setTimeout(function(){
        document.body.style.overflow = '';
        // плавный фейд выбранного примера
        let op = 1; const fade = setInterval(function(){ op -= 0.05; if (op <= 0){ clearInterval(fade); root.style.display = 'none'; root.style.opacity = 1; arrowIcon.style.display=''; checkIcon.style.display='none'; slideButton.classList.remove('success'); slideButton.style.background = '#fff'; slideButton.style.left='0px'; } else { root.style.opacity = op; } }, 15);
      }, 1000);
    }

    slideButton.addEventListener('mousedown', handleStart);
    slideButton.addEventListener('touchstart', handleStart, {passive:false});
    document.addEventListener('mousemove', handleMove);
    document.addEventListener('touchmove', handleMove, {passive:false});
    document.addEventListener('mouseup', handleEnd);
    document.addEventListener('touchend', handleEnd);
    window.addEventListener('resize', initSlider);
    setTimeout(initSlider, 100);
  }

  // по умолчанию открываем градиентный вариант
  document.querySelector('.demo-nav button[data-target="#preloader-gradient"]').click();
  </script>
</body>
</html>


